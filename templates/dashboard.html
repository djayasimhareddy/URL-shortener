<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<h2>Welcome, {{ username }}</h2>
<a href="/logout">Logout</a>

<h3>Shorten URL</h3>

<form method="POST">
    <input name="original_url" placeholder="https://example.com" required>
    <button type="submit">Shorten</button>
</form>

{% if error %}<p class="error">{{ error }}</p>{% endif %}

{% if short_url %}
<p>Your Short URL:</p>
<input value="{{ short_url }}" id="shortUrl" readonly>
<button onclick="copyText()">Copy</button>
{% endif %}

<h3>Your URLs</h3>

<table>
<tr><th>Original</th><th>Short</th></tr>
{% for row in urls %}
<tr>
<td><a href="{{ row['original_url'] }}" target="_blank">{{ row['original_url'] }}</a></td>
<td><a href="/{{ row['short_code'] }}" target="_blank">{{ request.host_url }}{{ row['short_code'] }}</a></td>
</tr>
{% endfor %}
</table>

<script>
function copyText() {
    let x = document.getElementById("shortUrl");
    x.select();
    document.execCommand("copy");
    alert("Copied!");
}
</script>

</body>
</html>
